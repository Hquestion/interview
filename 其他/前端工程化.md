# 前端工程化

工程化主要是根据业务特点，将前端开发流程规范化，标准化，以提升前端工程师的开发效率，
提高代码的健壮性，可维护性。

## 我在组件库工程化上做了什么

从开发 --> 测试 --> 部署三个方面谈

### 开发

#### 确定组件库目录结构

多包的目录结构，使用Lerna管理

#### 开发规范

+ 通过ESLint来做规范检查，在提交时通过husky+lint-staged对提交的代码做规范检查
+ 使用Flow做静态类型检查
+ 通过PR的方式，对编码的规范做Review，如css采用BEM规范，组件需实现install方法等

#### 模块化

使用es6 模块化方案

#### 灵活可定制

要求组件必须使用定义好的属性如颜色，字体大小，高度等来编写样式，同时，对于组件里可能需要定制的样式，暴露Sass变量来给应用做定制。
同时review组件的API设计，尽量向一些成熟的组件库靠齐。

#### 文档完备

开发/维护文档，保证与代码实现同步，确保文档的风格一致。


#### git工作流

每人fork一个仓库，及时同步代码，减少代码冲突。pull时需使用rebase的合并方式。
提交通过commitlint来做commit comment的校验，通过commitizen来规范/简化commit comment的输入。
push时推送到自己的仓库，向主仓库提交PR，review后合并PR。

#### 脚手架工具

通过该工具初始化组件的目录结构，基础代码，修改一些配置等。

### 测试

#### 单元测试

集成Jest做单元测试，要求每个组件必须提供单元测试用例。单元测试主要覆盖暴露的props、slots、事件等。

### 部署/发布

#### 组件库构建

使用Webpack打包组件，支持按需加载。对于公共的工具函数直接使用babel进行编译。

#### 版本控制

master分支为最新版本，多个release分支存放旧版本。在发布时会自动打tag。版本号第一位递增。

#### 组件库发布

通过Lerna来做多包仓库管理，Lerna可以帮助我们管理各个包之间的依赖，自动管理版本号/打tag，批量运行脚本等，
打包完成之后发布到公司内部的npm服务器，同时更新组件库文档。

